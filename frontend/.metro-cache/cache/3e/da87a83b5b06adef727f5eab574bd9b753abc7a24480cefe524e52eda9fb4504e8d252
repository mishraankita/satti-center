{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = exports.REALTIME_PRESENCE_LISTEN_EVENTS = void 0;\n  /*\n    This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n    License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n  */\n  var REALTIME_PRESENCE_LISTEN_EVENTS;\n  (function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n  })(REALTIME_PRESENCE_LISTEN_EVENTS || (exports.REALTIME_PRESENCE_LISTEN_EVENTS = REALTIME_PRESENCE_LISTEN_EVENTS = {}));\n  class RealtimePresence {\n    /**\n     * Creates a Presence helper that keeps the local presence state in sync with the server.\n     *\n     * @param channel - The realtime channel to bind to.\n     * @param opts - Optional custom event names, e.g. `{ events: { state: 'state', diff: 'diff' } }`.\n     *\n     * @example\n     * ```ts\n     * const presence = new RealtimePresence(channel)\n     *\n     * channel.on('presence', ({ event, key }) => {\n     *   console.log(`Presence ${event} on ${key}`)\n     * })\n     * ```\n     */\n    constructor(channel, opts) {\n      this.channel = channel;\n      this.state = {};\n      this.pendingDiffs = [];\n      this.joinRef = null;\n      this.enabled = false;\n      this.caller = {\n        onJoin: () => {},\n        onLeave: () => {},\n        onSync: () => {}\n      };\n      const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n        state: 'presence_state',\n        diff: 'presence_diff'\n      };\n      this.channel._on(events.state, {}, newState => {\n        const {\n          onJoin,\n          onLeave,\n          onSync\n        } = this.caller;\n        this.joinRef = this.channel._joinRef();\n        this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n        this.pendingDiffs.forEach(diff => {\n          this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n        });\n        this.pendingDiffs = [];\n        onSync();\n      });\n      this.channel._on(events.diff, {}, diff => {\n        const {\n          onJoin,\n          onLeave,\n          onSync\n        } = this.caller;\n        if (this.inPendingSyncState()) {\n          this.pendingDiffs.push(diff);\n        } else {\n          this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n          onSync();\n        }\n      });\n      this.onJoin((key, currentPresences, newPresences) => {\n        this.channel._trigger('presence', {\n          event: 'join',\n          key,\n          currentPresences,\n          newPresences\n        });\n      });\n      this.onLeave((key, currentPresences, leftPresences) => {\n        this.channel._trigger('presence', {\n          event: 'leave',\n          key,\n          currentPresences,\n          leftPresences\n        });\n      });\n      this.onSync(() => {\n        this.channel._trigger('presence', {\n          event: 'sync'\n        });\n      });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n      const state = this.cloneDeep(currentState);\n      const transformedState = this.transformState(newState);\n      const joins = {};\n      const leaves = {};\n      this.map(state, (key, presences) => {\n        if (!transformedState[key]) {\n          leaves[key] = presences;\n        }\n      });\n      this.map(transformedState, (key, newPresences) => {\n        const currentPresences = state[key];\n        if (currentPresences) {\n          const newPresenceRefs = newPresences.map(m => m.presence_ref);\n          const curPresenceRefs = currentPresences.map(m => m.presence_ref);\n          const joinedPresences = newPresences.filter(m => curPresenceRefs.indexOf(m.presence_ref) < 0);\n          const leftPresences = currentPresences.filter(m => newPresenceRefs.indexOf(m.presence_ref) < 0);\n          if (joinedPresences.length > 0) {\n            joins[key] = joinedPresences;\n          }\n          if (leftPresences.length > 0) {\n            leaves[key] = leftPresences;\n          }\n        } else {\n          joins[key] = newPresences;\n        }\n      });\n      return this.syncDiff(state, {\n        joins,\n        leaves\n      }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n      const {\n        joins,\n        leaves\n      } = {\n        joins: this.transformState(diff.joins),\n        leaves: this.transformState(diff.leaves)\n      };\n      if (!onJoin) {\n        onJoin = () => {};\n      }\n      if (!onLeave) {\n        onLeave = () => {};\n      }\n      this.map(joins, (key, newPresences) => {\n        var _a;\n        const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n        state[key] = this.cloneDeep(newPresences);\n        if (currentPresences.length > 0) {\n          const joinedPresenceRefs = state[key].map(m => m.presence_ref);\n          const curPresences = currentPresences.filter(m => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n          state[key].unshift(...curPresences);\n        }\n        onJoin(key, currentPresences, newPresences);\n      });\n      this.map(leaves, (key, leftPresences) => {\n        let currentPresences = state[key];\n        if (!currentPresences) return;\n        const presenceRefsToRemove = leftPresences.map(m => m.presence_ref);\n        currentPresences = currentPresences.filter(m => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n        state[key] = currentPresences;\n        onLeave(key, currentPresences, leftPresences);\n        if (currentPresences.length === 0) delete state[key];\n      });\n      return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n      return Object.getOwnPropertyNames(obj).map(key => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n      state = this.cloneDeep(state);\n      return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n        const presences = state[key];\n        if ('metas' in presences) {\n          newState[key] = presences.metas.map(presence => {\n            presence['presence_ref'] = presence['phx_ref'];\n            delete presence['phx_ref'];\n            delete presence['phx_ref_prev'];\n            return presence;\n          });\n        } else {\n          newState[key] = presences;\n        }\n        return newState;\n      }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n      return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n      this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n      this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n      this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n      return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n  }\n  exports.default = RealtimePresence;\n});","lineCount":250,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[10,2,5,7],[10,6,5,11,"REALTIME_PRESENCE_LISTEN_EVENTS"],[10,37,5,42],[11,2,6,0],[11,3,6,1],[11,13,6,11,"REALTIME_PRESENCE_LISTEN_EVENTS"],[11,44,6,42],[11,46,6,44],[12,4,7,4,"REALTIME_PRESENCE_LISTEN_EVENTS"],[12,35,7,35],[12,36,7,36],[12,42,7,42],[12,43,7,43],[12,46,7,46],[12,52,7,52],[13,4,8,4,"REALTIME_PRESENCE_LISTEN_EVENTS"],[13,35,8,35],[13,36,8,36],[13,42,8,42],[13,43,8,43],[13,46,8,46],[13,52,8,52],[14,4,9,4,"REALTIME_PRESENCE_LISTEN_EVENTS"],[14,35,9,35],[14,36,9,36],[14,43,9,43],[14,44,9,44],[14,47,9,47],[14,54,9,54],[15,2,10,0],[15,3,10,1],[15,5,10,3,"REALTIME_PRESENCE_LISTEN_EVENTS"],[15,36,10,34],[15,41,10,34,"exports"],[15,48,10,34],[15,49,10,34,"REALTIME_PRESENCE_LISTEN_EVENTS"],[15,80,10,34],[15,83,10,39,"REALTIME_PRESENCE_LISTEN_EVENTS"],[15,114,10,70],[15,117,10,73],[15,118,10,74],[15,119,10,75],[15,120,10,76],[15,121,10,77],[16,2,11,15],[16,8,11,21,"RealtimePresence"],[16,24,11,37],[16,25,11,38],[17,4,12,4],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,0,17,0],[23,0,18,0],[24,0,19,0],[25,0,20,0],[26,0,21,0],[27,0,22,0],[28,0,23,0],[29,0,24,0],[30,0,25,0],[31,0,26,0],[32,4,27,4,"constructor"],[32,15,27,15,"constructor"],[32,16,27,16,"channel"],[32,23,27,23],[32,25,27,25,"opts"],[32,29,27,29],[32,31,27,31],[33,6,28,8],[33,10,28,12],[33,11,28,13,"channel"],[33,18,28,20],[33,21,28,23,"channel"],[33,28,28,30],[34,6,29,8],[34,10,29,12],[34,11,29,13,"state"],[34,16,29,18],[34,19,29,21],[34,20,29,22],[34,21,29,23],[35,6,30,8],[35,10,30,12],[35,11,30,13,"pendingDiffs"],[35,23,30,25],[35,26,30,28],[35,28,30,30],[36,6,31,8],[36,10,31,12],[36,11,31,13,"joinRef"],[36,18,31,20],[36,21,31,23],[36,25,31,27],[37,6,32,8],[37,10,32,12],[37,11,32,13,"enabled"],[37,18,32,20],[37,21,32,23],[37,26,32,28],[38,6,33,8],[38,10,33,12],[38,11,33,13,"caller"],[38,17,33,19],[38,20,33,22],[39,8,34,12,"onJoin"],[39,14,34,18],[39,16,34,20,"onJoin"],[39,17,34,20],[39,22,34,26],[39,23,34,28],[39,24,34,29],[40,8,35,12,"onLeave"],[40,15,35,19],[40,17,35,21,"onLeave"],[40,18,35,21],[40,23,35,27],[40,24,35,29],[40,25,35,30],[41,8,36,12,"onSync"],[41,14,36,18],[41,16,36,20,"onSync"],[41,17,36,20],[41,22,36,26],[41,23,36,28],[42,6,37,8],[42,7,37,9],[43,6,38,8],[43,12,38,14,"events"],[43,18,38,20],[43,21,38,23],[43,22,38,24,"opts"],[43,26,38,28],[43,31,38,33],[43,35,38,37],[43,39,38,41,"opts"],[43,43,38,45],[43,48,38,50],[43,53,38,55],[43,54,38,56],[43,57,38,59],[43,62,38,64],[43,63,38,65],[43,66,38,68,"opts"],[43,70,38,72],[43,71,38,73,"events"],[43,77,38,79],[43,82,38,84],[44,8,39,12,"state"],[44,13,39,17],[44,15,39,19],[44,31,39,35],[45,8,40,12,"diff"],[45,12,40,16],[45,14,40,18],[46,6,41,8],[46,7,41,9],[47,6,42,8],[47,10,42,12],[47,11,42,13,"channel"],[47,18,42,20],[47,19,42,21,"_on"],[47,22,42,24],[47,23,42,25,"events"],[47,29,42,31],[47,30,42,32,"state"],[47,35,42,37],[47,37,42,39],[47,38,42,40],[47,39,42,41],[47,41,42,44,"newState"],[47,49,42,52],[47,53,42,57],[48,8,43,12],[48,14,43,18],[49,10,43,20,"onJoin"],[49,16,43,26],[50,10,43,28,"onLeave"],[50,17,43,35],[51,10,43,37,"onSync"],[52,8,43,44],[52,9,43,45],[52,12,43,48],[52,16,43,52],[52,17,43,53,"caller"],[52,23,43,59],[53,8,44,12],[53,12,44,16],[53,13,44,17,"joinRef"],[53,20,44,24],[53,23,44,27],[53,27,44,31],[53,28,44,32,"channel"],[53,35,44,39],[53,36,44,40,"_joinRef"],[53,44,44,48],[53,45,44,49],[53,46,44,50],[54,8,45,12],[54,12,45,16],[54,13,45,17,"state"],[54,18,45,22],[54,21,45,25,"RealtimePresence"],[54,37,45,41],[54,38,45,42,"syncState"],[54,47,45,51],[54,48,45,52],[54,52,45,56],[54,53,45,57,"state"],[54,58,45,62],[54,60,45,64,"newState"],[54,68,45,72],[54,70,45,74,"onJoin"],[54,76,45,80],[54,78,45,82,"onLeave"],[54,85,45,89],[54,86,45,90],[55,8,46,12],[55,12,46,16],[55,13,46,17,"pendingDiffs"],[55,25,46,29],[55,26,46,30,"forEach"],[55,33,46,37],[55,34,46,39,"diff"],[55,38,46,43],[55,42,46,48],[56,10,47,16],[56,14,47,20],[56,15,47,21,"state"],[56,20,47,26],[56,23,47,29,"RealtimePresence"],[56,39,47,45],[56,40,47,46,"syncDiff"],[56,48,47,54],[56,49,47,55],[56,53,47,59],[56,54,47,60,"state"],[56,59,47,65],[56,61,47,67,"diff"],[56,65,47,71],[56,67,47,73,"onJoin"],[56,73,47,79],[56,75,47,81,"onLeave"],[56,82,47,88],[56,83,47,89],[57,8,48,12],[57,9,48,13],[57,10,48,14],[58,8,49,12],[58,12,49,16],[58,13,49,17,"pendingDiffs"],[58,25,49,29],[58,28,49,32],[58,30,49,34],[59,8,50,12,"onSync"],[59,14,50,18],[59,15,50,19],[59,16,50,20],[60,6,51,8],[60,7,51,9],[60,8,51,10],[61,6,52,8],[61,10,52,12],[61,11,52,13,"channel"],[61,18,52,20],[61,19,52,21,"_on"],[61,22,52,24],[61,23,52,25,"events"],[61,29,52,31],[61,30,52,32,"diff"],[61,34,52,36],[61,36,52,38],[61,37,52,39],[61,38,52,40],[61,40,52,43,"diff"],[61,44,52,47],[61,48,52,52],[62,8,53,12],[62,14,53,18],[63,10,53,20,"onJoin"],[63,16,53,26],[64,10,53,28,"onLeave"],[64,17,53,35],[65,10,53,37,"onSync"],[66,8,53,44],[66,9,53,45],[66,12,53,48],[66,16,53,52],[66,17,53,53,"caller"],[66,23,53,59],[67,8,54,12],[67,12,54,16],[67,16,54,20],[67,17,54,21,"inPendingSyncState"],[67,35,54,39],[67,36,54,40],[67,37,54,41],[67,39,54,43],[68,10,55,16],[68,14,55,20],[68,15,55,21,"pendingDiffs"],[68,27,55,33],[68,28,55,34,"push"],[68,32,55,38],[68,33,55,39,"diff"],[68,37,55,43],[68,38,55,44],[69,8,56,12],[69,9,56,13],[69,15,57,17],[70,10,58,16],[70,14,58,20],[70,15,58,21,"state"],[70,20,58,26],[70,23,58,29,"RealtimePresence"],[70,39,58,45],[70,40,58,46,"syncDiff"],[70,48,58,54],[70,49,58,55],[70,53,58,59],[70,54,58,60,"state"],[70,59,58,65],[70,61,58,67,"diff"],[70,65,58,71],[70,67,58,73,"onJoin"],[70,73,58,79],[70,75,58,81,"onLeave"],[70,82,58,88],[70,83,58,89],[71,10,59,16,"onSync"],[71,16,59,22],[71,17,59,23],[71,18,59,24],[72,8,60,12],[73,6,61,8],[73,7,61,9],[73,8,61,10],[74,6,62,8],[74,10,62,12],[74,11,62,13,"onJoin"],[74,17,62,19],[74,18,62,20],[74,19,62,21,"key"],[74,22,62,24],[74,24,62,26,"currentPresences"],[74,40,62,42],[74,42,62,44,"newPresences"],[74,54,62,56],[74,59,62,61],[75,8,63,12],[75,12,63,16],[75,13,63,17,"channel"],[75,20,63,24],[75,21,63,25,"_trigger"],[75,29,63,33],[75,30,63,34],[75,40,63,44],[75,42,63,46],[76,10,64,16,"event"],[76,15,64,21],[76,17,64,23],[76,23,64,29],[77,10,65,16,"key"],[77,13,65,19],[78,10,66,16,"currentPresences"],[78,26,66,32],[79,10,67,16,"newPresences"],[80,8,68,12],[80,9,68,13],[80,10,68,14],[81,6,69,8],[81,7,69,9],[81,8,69,10],[82,6,70,8],[82,10,70,12],[82,11,70,13,"onLeave"],[82,18,70,20],[82,19,70,21],[82,20,70,22,"key"],[82,23,70,25],[82,25,70,27,"currentPresences"],[82,41,70,43],[82,43,70,45,"leftPresences"],[82,56,70,58],[82,61,70,63],[83,8,71,12],[83,12,71,16],[83,13,71,17,"channel"],[83,20,71,24],[83,21,71,25,"_trigger"],[83,29,71,33],[83,30,71,34],[83,40,71,44],[83,42,71,46],[84,10,72,16,"event"],[84,15,72,21],[84,17,72,23],[84,24,72,30],[85,10,73,16,"key"],[85,13,73,19],[86,10,74,16,"currentPresences"],[86,26,74,32],[87,10,75,16,"leftPresences"],[88,8,76,12],[88,9,76,13],[88,10,76,14],[89,6,77,8],[89,7,77,9],[89,8,77,10],[90,6,78,8],[90,10,78,12],[90,11,78,13,"onSync"],[90,17,78,19],[90,18,78,20],[90,24,78,26],[91,8,79,12],[91,12,79,16],[91,13,79,17,"channel"],[91,20,79,24],[91,21,79,25,"_trigger"],[91,29,79,33],[91,30,79,34],[91,40,79,44],[91,42,79,46],[92,10,79,48,"event"],[92,15,79,53],[92,17,79,55],[93,8,79,62],[93,9,79,63],[93,10,79,64],[94,6,80,8],[94,7,80,9],[94,8,80,10],[95,4,81,4],[96,4,82,4],[97,0,83,0],[98,0,84,0],[99,0,85,0],[100,0,86,0],[101,0,87,0],[102,0,88,0],[103,0,89,0],[104,0,90,0],[105,0,91,0],[106,4,92,4],[106,11,92,11,"syncState"],[106,20,92,20,"syncState"],[106,21,92,21,"currentState"],[106,33,92,33],[106,35,92,35,"newState"],[106,43,92,43],[106,45,92,45,"onJoin"],[106,51,92,51],[106,53,92,53,"onLeave"],[106,60,92,60],[106,62,92,62],[107,6,93,8],[107,12,93,14,"state"],[107,17,93,19],[107,20,93,22],[107,24,93,26],[107,25,93,27,"cloneDeep"],[107,34,93,36],[107,35,93,37,"currentState"],[107,47,93,49],[107,48,93,50],[108,6,94,8],[108,12,94,14,"transformedState"],[108,28,94,30],[108,31,94,33],[108,35,94,37],[108,36,94,38,"transformState"],[108,50,94,52],[108,51,94,53,"newState"],[108,59,94,61],[108,60,94,62],[109,6,95,8],[109,12,95,14,"joins"],[109,17,95,19],[109,20,95,22],[109,21,95,23],[109,22,95,24],[110,6,96,8],[110,12,96,14,"leaves"],[110,18,96,20],[110,21,96,23],[110,22,96,24],[110,23,96,25],[111,6,97,8],[111,10,97,12],[111,11,97,13,"map"],[111,14,97,16],[111,15,97,17,"state"],[111,20,97,22],[111,22,97,24],[111,23,97,25,"key"],[111,26,97,28],[111,28,97,30,"presences"],[111,37,97,39],[111,42,97,44],[112,8,98,12],[112,12,98,16],[112,13,98,17,"transformedState"],[112,29,98,33],[112,30,98,34,"key"],[112,33,98,37],[112,34,98,38],[112,36,98,40],[113,10,99,16,"leaves"],[113,16,99,22],[113,17,99,23,"key"],[113,20,99,26],[113,21,99,27],[113,24,99,30,"presences"],[113,33,99,39],[114,8,100,12],[115,6,101,8],[115,7,101,9],[115,8,101,10],[116,6,102,8],[116,10,102,12],[116,11,102,13,"map"],[116,14,102,16],[116,15,102,17,"transformedState"],[116,31,102,33],[116,33,102,35],[116,34,102,36,"key"],[116,37,102,39],[116,39,102,41,"newPresences"],[116,51,102,53],[116,56,102,58],[117,8,103,12],[117,14,103,18,"currentPresences"],[117,30,103,34],[117,33,103,37,"state"],[117,38,103,42],[117,39,103,43,"key"],[117,42,103,46],[117,43,103,47],[118,8,104,12],[118,12,104,16,"currentPresences"],[118,28,104,32],[118,30,104,34],[119,10,105,16],[119,16,105,22,"newPresenceRefs"],[119,31,105,37],[119,34,105,40,"newPresences"],[119,46,105,52],[119,47,105,53,"map"],[119,50,105,56],[119,51,105,58,"m"],[119,52,105,59],[119,56,105,64,"m"],[119,57,105,65],[119,58,105,66,"presence_ref"],[119,70,105,78],[119,71,105,79],[120,10,106,16],[120,16,106,22,"curPresenceRefs"],[120,31,106,37],[120,34,106,40,"currentPresences"],[120,50,106,56],[120,51,106,57,"map"],[120,54,106,60],[120,55,106,62,"m"],[120,56,106,63],[120,60,106,68,"m"],[120,61,106,69],[120,62,106,70,"presence_ref"],[120,74,106,82],[120,75,106,83],[121,10,107,16],[121,16,107,22,"joinedPresences"],[121,31,107,37],[121,34,107,40,"newPresences"],[121,46,107,52],[121,47,107,53,"filter"],[121,53,107,59],[121,54,107,61,"m"],[121,55,107,62],[121,59,107,67,"curPresenceRefs"],[121,74,107,82],[121,75,107,83,"indexOf"],[121,82,107,90],[121,83,107,91,"m"],[121,84,107,92],[121,85,107,93,"presence_ref"],[121,97,107,105],[121,98,107,106],[121,101,107,109],[121,102,107,110],[121,103,107,111],[122,10,108,16],[122,16,108,22,"leftPresences"],[122,29,108,35],[122,32,108,38,"currentPresences"],[122,48,108,54],[122,49,108,55,"filter"],[122,55,108,61],[122,56,108,63,"m"],[122,57,108,64],[122,61,108,69,"newPresenceRefs"],[122,76,108,84],[122,77,108,85,"indexOf"],[122,84,108,92],[122,85,108,93,"m"],[122,86,108,94],[122,87,108,95,"presence_ref"],[122,99,108,107],[122,100,108,108],[122,103,108,111],[122,104,108,112],[122,105,108,113],[123,10,109,16],[123,14,109,20,"joinedPresences"],[123,29,109,35],[123,30,109,36,"length"],[123,36,109,42],[123,39,109,45],[123,40,109,46],[123,42,109,48],[124,12,110,20,"joins"],[124,17,110,25],[124,18,110,26,"key"],[124,21,110,29],[124,22,110,30],[124,25,110,33,"joinedPresences"],[124,40,110,48],[125,10,111,16],[126,10,112,16],[126,14,112,20,"leftPresences"],[126,27,112,33],[126,28,112,34,"length"],[126,34,112,40],[126,37,112,43],[126,38,112,44],[126,40,112,46],[127,12,113,20,"leaves"],[127,18,113,26],[127,19,113,27,"key"],[127,22,113,30],[127,23,113,31],[127,26,113,34,"leftPresences"],[127,39,113,47],[128,10,114,16],[129,8,115,12],[129,9,115,13],[129,15,116,17],[130,10,117,16,"joins"],[130,15,117,21],[130,16,117,22,"key"],[130,19,117,25],[130,20,117,26],[130,23,117,29,"newPresences"],[130,35,117,41],[131,8,118,12],[132,6,119,8],[132,7,119,9],[132,8,119,10],[133,6,120,8],[133,13,120,15],[133,17,120,19],[133,18,120,20,"syncDiff"],[133,26,120,28],[133,27,120,29,"state"],[133,32,120,34],[133,34,120,36],[134,8,120,38,"joins"],[134,13,120,43],[135,8,120,45,"leaves"],[136,6,120,52],[136,7,120,53],[136,9,120,55,"onJoin"],[136,15,120,61],[136,17,120,63,"onLeave"],[136,24,120,70],[136,25,120,71],[137,4,121,4],[138,4,122,4],[139,0,123,0],[140,0,124,0],[141,0,125,0],[142,0,126,0],[143,0,127,0],[144,0,128,0],[145,0,129,0],[146,0,130,0],[147,0,131,0],[148,4,132,4],[148,11,132,11,"syncDiff"],[148,19,132,19,"syncDiff"],[148,20,132,20,"state"],[148,25,132,25],[148,27,132,27,"diff"],[148,31,132,31],[148,33,132,33,"onJoin"],[148,39,132,39],[148,41,132,41,"onLeave"],[148,48,132,48],[148,50,132,50],[149,6,133,8],[149,12,133,14],[150,8,133,16,"joins"],[150,13,133,21],[151,8,133,23,"leaves"],[152,6,133,30],[152,7,133,31],[152,10,133,34],[153,8,134,12,"joins"],[153,13,134,17],[153,15,134,19],[153,19,134,23],[153,20,134,24,"transformState"],[153,34,134,38],[153,35,134,39,"diff"],[153,39,134,43],[153,40,134,44,"joins"],[153,45,134,49],[153,46,134,50],[154,8,135,12,"leaves"],[154,14,135,18],[154,16,135,20],[154,20,135,24],[154,21,135,25,"transformState"],[154,35,135,39],[154,36,135,40,"diff"],[154,40,135,44],[154,41,135,45,"leaves"],[154,47,135,51],[155,6,136,8],[155,7,136,9],[156,6,137,8],[156,10,137,12],[156,11,137,13,"onJoin"],[156,17,137,19],[156,19,137,21],[157,8,138,12,"onJoin"],[157,14,138,18],[157,17,138,21,"onJoin"],[157,18,138,21],[157,23,138,27],[157,24,138,29],[157,25,138,30],[158,6,139,8],[159,6,140,8],[159,10,140,12],[159,11,140,13,"onLeave"],[159,18,140,20],[159,20,140,22],[160,8,141,12,"onLeave"],[160,15,141,19],[160,18,141,22,"onLeave"],[160,19,141,22],[160,24,141,28],[160,25,141,30],[160,26,141,31],[161,6,142,8],[162,6,143,8],[162,10,143,12],[162,11,143,13,"map"],[162,14,143,16],[162,15,143,17,"joins"],[162,20,143,22],[162,22,143,24],[162,23,143,25,"key"],[162,26,143,28],[162,28,143,30,"newPresences"],[162,40,143,42],[162,45,143,47],[163,8,144,12],[163,12,144,16,"_a"],[163,14,144,18],[164,8,145,12],[164,14,145,18,"currentPresences"],[164,30,145,34],[164,33,145,37],[164,34,145,38,"_a"],[164,36,145,40],[164,39,145,43,"state"],[164,44,145,48],[164,45,145,49,"key"],[164,48,145,52],[164,49,145,53],[164,55,145,59],[164,59,145,63],[164,63,145,67,"_a"],[164,65,145,69],[164,70,145,74],[164,75,145,79],[164,76,145,80],[164,79,145,83,"_a"],[164,81,145,85],[164,84,145,88],[164,86,145,90],[165,8,146,12,"state"],[165,13,146,17],[165,14,146,18,"key"],[165,17,146,21],[165,18,146,22],[165,21,146,25],[165,25,146,29],[165,26,146,30,"cloneDeep"],[165,35,146,39],[165,36,146,40,"newPresences"],[165,48,146,52],[165,49,146,53],[166,8,147,12],[166,12,147,16,"currentPresences"],[166,28,147,32],[166,29,147,33,"length"],[166,35,147,39],[166,38,147,42],[166,39,147,43],[166,41,147,45],[167,10,148,16],[167,16,148,22,"joinedPresenceRefs"],[167,34,148,40],[167,37,148,43,"state"],[167,42,148,48],[167,43,148,49,"key"],[167,46,148,52],[167,47,148,53],[167,48,148,54,"map"],[167,51,148,57],[167,52,148,59,"m"],[167,53,148,60],[167,57,148,65,"m"],[167,58,148,66],[167,59,148,67,"presence_ref"],[167,71,148,79],[167,72,148,80],[168,10,149,16],[168,16,149,22,"curPresences"],[168,28,149,34],[168,31,149,37,"currentPresences"],[168,47,149,53],[168,48,149,54,"filter"],[168,54,149,60],[168,55,149,62,"m"],[168,56,149,63],[168,60,149,68,"joinedPresenceRefs"],[168,78,149,86],[168,79,149,87,"indexOf"],[168,86,149,94],[168,87,149,95,"m"],[168,88,149,96],[168,89,149,97,"presence_ref"],[168,101,149,109],[168,102,149,110],[168,105,149,113],[168,106,149,114],[168,107,149,115],[169,10,150,16,"state"],[169,15,150,21],[169,16,150,22,"key"],[169,19,150,25],[169,20,150,26],[169,21,150,27,"unshift"],[169,28,150,34],[169,29,150,35],[169,32,150,38,"curPresences"],[169,44,150,50],[169,45,150,51],[170,8,151,12],[171,8,152,12,"onJoin"],[171,14,152,18],[171,15,152,19,"key"],[171,18,152,22],[171,20,152,24,"currentPresences"],[171,36,152,40],[171,38,152,42,"newPresences"],[171,50,152,54],[171,51,152,55],[172,6,153,8],[172,7,153,9],[172,8,153,10],[173,6,154,8],[173,10,154,12],[173,11,154,13,"map"],[173,14,154,16],[173,15,154,17,"leaves"],[173,21,154,23],[173,23,154,25],[173,24,154,26,"key"],[173,27,154,29],[173,29,154,31,"leftPresences"],[173,42,154,44],[173,47,154,49],[174,8,155,12],[174,12,155,16,"currentPresences"],[174,28,155,32],[174,31,155,35,"state"],[174,36,155,40],[174,37,155,41,"key"],[174,40,155,44],[174,41,155,45],[175,8,156,12],[175,12,156,16],[175,13,156,17,"currentPresences"],[175,29,156,33],[175,31,157,16],[176,8,158,12],[176,14,158,18,"presenceRefsToRemove"],[176,34,158,38],[176,37,158,41,"leftPresences"],[176,50,158,54],[176,51,158,55,"map"],[176,54,158,58],[176,55,158,60,"m"],[176,56,158,61],[176,60,158,66,"m"],[176,61,158,67],[176,62,158,68,"presence_ref"],[176,74,158,80],[176,75,158,81],[177,8,159,12,"currentPresences"],[177,24,159,28],[177,27,159,31,"currentPresences"],[177,43,159,47],[177,44,159,48,"filter"],[177,50,159,54],[177,51,159,56,"m"],[177,52,159,57],[177,56,159,62,"presenceRefsToRemove"],[177,76,159,82],[177,77,159,83,"indexOf"],[177,84,159,90],[177,85,159,91,"m"],[177,86,159,92],[177,87,159,93,"presence_ref"],[177,99,159,105],[177,100,159,106],[177,103,159,109],[177,104,159,110],[177,105,159,111],[178,8,160,12,"state"],[178,13,160,17],[178,14,160,18,"key"],[178,17,160,21],[178,18,160,22],[178,21,160,25,"currentPresences"],[178,37,160,41],[179,8,161,12,"onLeave"],[179,15,161,19],[179,16,161,20,"key"],[179,19,161,23],[179,21,161,25,"currentPresences"],[179,37,161,41],[179,39,161,43,"leftPresences"],[179,52,161,56],[179,53,161,57],[180,8,162,12],[180,12,162,16,"currentPresences"],[180,28,162,32],[180,29,162,33,"length"],[180,35,162,39],[180,40,162,44],[180,41,162,45],[180,43,163,16],[180,50,163,23,"state"],[180,55,163,28],[180,56,163,29,"key"],[180,59,163,32],[180,60,163,33],[181,6,164,8],[181,7,164,9],[181,8,164,10],[182,6,165,8],[182,13,165,15,"state"],[182,18,165,20],[183,4,166,4],[184,4,167,4],[185,4,168,4],[185,11,168,11,"map"],[185,14,168,14,"map"],[185,15,168,15,"obj"],[185,18,168,18],[185,20,168,20,"func"],[185,24,168,24],[185,26,168,26],[186,6,169,8],[186,13,169,15,"Object"],[186,19,169,21],[186,20,169,22,"getOwnPropertyNames"],[186,39,169,41],[186,40,169,42,"obj"],[186,43,169,45],[186,44,169,46],[186,45,169,47,"map"],[186,48,169,50],[186,49,169,52,"key"],[186,52,169,55],[186,56,169,60,"func"],[186,60,169,64],[186,61,169,65,"key"],[186,64,169,68],[186,66,169,70,"obj"],[186,69,169,73],[186,70,169,74,"key"],[186,73,169,77],[186,74,169,78],[186,75,169,79],[186,76,169,80],[187,4,170,4],[188,4,171,4],[189,0,172,0],[190,0,173,0],[191,0,174,0],[192,0,175,0],[193,0,176,0],[194,0,177,0],[195,0,178,0],[196,0,179,0],[197,0,180,0],[198,0,181,0],[199,0,182,0],[200,0,183,0],[201,0,184,0],[202,0,185,0],[203,0,186,0],[204,0,187,0],[205,0,188,0],[206,0,189,0],[207,0,190,0],[208,0,191,0],[209,0,192,0],[210,0,193,0],[211,4,194,4],[211,11,194,11,"transformState"],[211,25,194,25,"transformState"],[211,26,194,26,"state"],[211,31,194,31],[211,33,194,33],[212,6,195,8,"state"],[212,11,195,13],[212,14,195,16],[212,18,195,20],[212,19,195,21,"cloneDeep"],[212,28,195,30],[212,29,195,31,"state"],[212,34,195,36],[212,35,195,37],[213,6,196,8],[213,13,196,15,"Object"],[213,19,196,21],[213,20,196,22,"getOwnPropertyNames"],[213,39,196,41],[213,40,196,42,"state"],[213,45,196,47],[213,46,196,48],[213,47,196,49,"reduce"],[213,53,196,55],[213,54,196,56],[213,55,196,57,"newState"],[213,63,196,65],[213,65,196,67,"key"],[213,68,196,70],[213,73,196,75],[214,8,197,12],[214,14,197,18,"presences"],[214,23,197,27],[214,26,197,30,"state"],[214,31,197,35],[214,32,197,36,"key"],[214,35,197,39],[214,36,197,40],[215,8,198,12],[215,12,198,16],[215,19,198,23],[215,23,198,27,"presences"],[215,32,198,36],[215,34,198,38],[216,10,199,16,"newState"],[216,18,199,24],[216,19,199,25,"key"],[216,22,199,28],[216,23,199,29],[216,26,199,32,"presences"],[216,35,199,41],[216,36,199,42,"metas"],[216,41,199,47],[216,42,199,48,"map"],[216,45,199,51],[216,46,199,53,"presence"],[216,54,199,61],[216,58,199,66],[217,12,200,20,"presence"],[217,20,200,28],[217,21,200,29],[217,35,200,43],[217,36,200,44],[217,39,200,47,"presence"],[217,47,200,55],[217,48,200,56],[217,57,200,65],[217,58,200,66],[218,12,201,20],[218,19,201,27,"presence"],[218,27,201,35],[218,28,201,36],[218,37,201,45],[218,38,201,46],[219,12,202,20],[219,19,202,27,"presence"],[219,27,202,35],[219,28,202,36],[219,42,202,50],[219,43,202,51],[220,12,203,20],[220,19,203,27,"presence"],[220,27,203,35],[221,10,204,16],[221,11,204,17],[221,12,204,18],[222,8,205,12],[222,9,205,13],[222,15,206,17],[223,10,207,16,"newState"],[223,18,207,24],[223,19,207,25,"key"],[223,22,207,28],[223,23,207,29],[223,26,207,32,"presences"],[223,35,207,41],[224,8,208,12],[225,8,209,12],[225,15,209,19,"newState"],[225,23,209,27],[226,6,210,8],[226,7,210,9],[226,9,210,11],[226,10,210,12],[226,11,210,13],[226,12,210,14],[227,4,211,4],[228,4,212,4],[229,4,213,4],[229,11,213,11,"cloneDeep"],[229,20,213,20,"cloneDeep"],[229,21,213,21,"obj"],[229,24,213,24],[229,26,213,26],[230,6,214,8],[230,13,214,15,"JSON"],[230,17,214,19],[230,18,214,20,"parse"],[230,23,214,25],[230,24,214,26,"JSON"],[230,28,214,30],[230,29,214,31,"stringify"],[230,38,214,40],[230,39,214,41,"obj"],[230,42,214,44],[230,43,214,45],[230,44,214,46],[231,4,215,4],[232,4,216,4],[233,4,217,4,"onJoin"],[233,10,217,10,"onJoin"],[233,11,217,11,"callback"],[233,19,217,19],[233,21,217,21],[234,6,218,8],[234,10,218,12],[234,11,218,13,"caller"],[234,17,218,19],[234,18,218,20,"onJoin"],[234,24,218,26],[234,27,218,29,"callback"],[234,35,218,37],[235,4,219,4],[236,4,220,4],[237,4,221,4,"onLeave"],[237,11,221,11,"onLeave"],[237,12,221,12,"callback"],[237,20,221,20],[237,22,221,22],[238,6,222,8],[238,10,222,12],[238,11,222,13,"caller"],[238,17,222,19],[238,18,222,20,"onLeave"],[238,25,222,27],[238,28,222,30,"callback"],[238,36,222,38],[239,4,223,4],[240,4,224,4],[241,4,225,4,"onSync"],[241,10,225,10,"onSync"],[241,11,225,11,"callback"],[241,19,225,19],[241,21,225,21],[242,6,226,8],[242,10,226,12],[242,11,226,13,"caller"],[242,17,226,19],[242,18,226,20,"onSync"],[242,24,226,26],[242,27,226,29,"callback"],[242,35,226,37],[243,4,227,4],[244,4,228,4],[245,4,229,4,"inPendingSyncState"],[245,22,229,22,"inPendingSyncState"],[245,23,229,22],[245,25,229,25],[246,6,230,8],[246,13,230,15],[246,14,230,16],[246,18,230,20],[246,19,230,21,"joinRef"],[246,26,230,28],[246,30,230,32],[246,34,230,36],[246,35,230,37,"joinRef"],[246,42,230,44],[246,47,230,49],[246,51,230,53],[246,52,230,54,"channel"],[246,59,230,61],[246,60,230,62,"_joinRef"],[246,68,230,70],[246,69,230,71],[246,70,230,72],[247,4,231,4],[248,2,232,0],[249,2,232,1,"exports"],[249,9,232,1],[249,10,232,1,"default"],[249,17,232,1],[249,20,232,1,"RealtimePresence"],[249,36,232,1],[250,0,232,1],[250,3]],"functionMap":{"names":["<global>","<anonymous>","RealtimePresence","constructor","caller.onJoin","caller.onLeave","caller.onSync","channel._on$argument_2","pendingDiffs.forEach$argument_0","onJoin$argument_0","onLeave$argument_0","onSync$argument_0","syncState","map$argument_1","newPresences.map$argument_0","currentPresences.map$argument_0","newPresences.filter$argument_0","currentPresences.filter$argument_0","syncDiff","onJoin","onLeave","state.key.map$argument_0","leftPresences.map$argument_0","map","Object.getOwnPropertyNames.map$argument_0","transformState","Object.getOwnPropertyNames.reduce$argument_0","presences.metas.map$argument_0","cloneDeep","onSync","inPendingSyncState"],"mappings":"AAA;CCK;CDI;eEC;ICgB;oBCO,SD;qBEC,SF;oBGC,SH;2CIM;sCCI;aDE;SJG;0CIC;SJS;oBMC;SNO;qBOC;SPO;oBQC;SRE;KDC;IUW;wBCK;SDI;mCCC;yDCG,qBD;6DEC,qBF;4DGC,kDH;8DIC,kDJ;SDW;KVE;IgBW;qBCM,SD;sBEG,SF;wBLE;0DQK,qBR;6DIC,qDJ;SKI;yBLC;2DSI,qBT;uDIC,uDJ;SKK;KhBE;IqBE;mDCC,4BD;KrBC;IuBwB;wDCE;oDCG;iBDK;SDM;KvBC;I0BE;K1BE;IiBE;KjBE;IkBE;KlBE;I2BE;K3BE;I4BE;K5BE;CFC"}},"type":"js/module"}]}