{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = exports.WebSocketFactory = void 0;\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  class WebSocketFactory {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    constructor() {}\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n      const _process = globalThis['process'];\n      if (_process) {\n        const processVersions = _process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    /**\n     * Returns the best available WebSocket constructor for the current runtime.\n     *\n     * @example\n     * ```ts\n     * const WS = WebSocketFactory.getWebSocketConstructor()\n     * const socket = new WS('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    /**\n     * Creates a WebSocket using the detected constructor.\n     *\n     * @example\n     * ```ts\n     * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    /**\n     * Detects whether the runtime can establish WebSocket connections.\n     *\n     * @example\n     * ```ts\n     * if (!WebSocketFactory.isWebSocketSupported()) {\n     *   console.warn('Falling back to long polling')\n     * }\n     * ```\n     */\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  exports.WebSocketFactory = WebSocketFactory;\n  var _default = exports.default = WebSocketFactory;\n});","lineCount":139,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,2,4,7],[9,8,4,13,"WebSocketFactory"],[9,24,4,29],[9,25,4,30],[10,4,5,4],[11,0,6,0],[12,0,7,0],[13,4,8,4,"constructor"],[13,15,8,15,"constructor"],[13,16,8,15],[13,18,8,18],[13,19,8,20],[14,4,9,4],[14,11,9,11,"detectEnvironment"],[14,28,9,28,"detectEnvironment"],[14,29,9,28],[14,31,9,31],[15,6,10,8],[15,10,10,12,"_a"],[15,12,10,14],[16,6,11,8],[16,10,11,12],[16,17,11,19,"WebSocket"],[16,26,11,28],[16,31,11,33],[16,42,11,44],[16,44,11,46],[17,8,12,12],[17,15,12,19],[18,10,12,21,"type"],[18,14,12,25],[18,16,12,27],[18,24,12,35],[19,10,12,37,"constructor"],[19,21,12,48],[19,23,12,50,"WebSocket"],[20,8,12,60],[20,9,12,61],[21,6,13,8],[22,6,14,8],[22,10,14,12],[22,17,14,19,"globalThis"],[22,27,14,29],[22,32,14,34],[22,43,14,45],[22,47,14,49],[22,54,14,56,"globalThis"],[22,64,14,66],[22,65,14,67,"WebSocket"],[22,74,14,76],[22,79,14,81],[22,90,14,92],[22,92,14,94],[23,8,15,12],[23,15,15,19],[24,10,15,21,"type"],[24,14,15,25],[24,16,15,27],[24,24,15,35],[25,10,15,37,"constructor"],[25,21,15,48],[25,23,15,50,"globalThis"],[25,33,15,60],[25,34,15,61,"WebSocket"],[26,8,15,71],[26,9,15,72],[27,6,16,8],[28,6,17,8],[28,10,17,12],[28,17,17,19,"global"],[28,23,17,25],[28,28,17,30],[28,39,17,41],[28,43,17,45],[28,50,17,52,"global"],[28,56,17,58],[28,57,17,59,"WebSocket"],[28,66,17,68],[28,71,17,73],[28,82,17,84],[28,84,17,86],[29,8,18,12],[29,15,18,19],[30,10,18,21,"type"],[30,14,18,25],[30,16,18,27],[30,24,18,35],[31,10,18,37,"constructor"],[31,21,18,48],[31,23,18,50,"global"],[31,29,18,56],[31,30,18,57,"WebSocket"],[32,8,18,67],[32,9,18,68],[33,6,19,8],[34,6,20,8],[34,10,20,12],[34,17,20,19,"globalThis"],[34,27,20,29],[34,32,20,34],[34,43,20,45],[34,47,21,12],[34,54,21,19,"globalThis"],[34,64,21,29],[34,65,21,30,"WebSocketPair"],[34,78,21,43],[34,83,21,48],[34,94,21,59],[34,98,22,12],[34,105,22,19,"globalThis"],[34,115,22,29],[34,116,22,30,"WebSocket"],[34,125,22,39],[34,130,22,44],[34,141,22,55],[34,143,22,57],[35,8,23,12],[35,15,23,19],[36,10,24,16,"type"],[36,14,24,20],[36,16,24,22],[36,28,24,34],[37,10,25,16,"error"],[37,15,25,21],[37,17,25,23],[37,106,25,112],[38,10,26,16,"workaround"],[38,20,26,26],[38,22,26,28],[39,8,27,12],[39,9,27,13],[40,6,28,8],[41,6,29,8],[41,10,29,13],[41,17,29,20,"globalThis"],[41,27,29,30],[41,32,29,35],[41,43,29,46],[41,47,29,50,"globalThis"],[41,57,29,60],[41,58,29,61,"EdgeRuntime"],[41,69,29,72],[41,73,30,13],[41,80,30,20,"navigator"],[41,89,30,29],[41,94,30,34],[41,105,30,45],[41,110,30,50],[41,111,30,51,"_a"],[41,113,30,53],[41,116,30,56,"navigator"],[41,125,30,65],[41,126,30,66,"userAgent"],[41,135,30,75],[41,141,30,81],[41,145,30,85],[41,149,30,89,"_a"],[41,151,30,91],[41,156,30,96],[41,161,30,101],[41,162,30,102],[41,165,30,105],[41,170,30,110],[41,171,30,111],[41,174,30,114,"_a"],[41,176,30,116],[41,177,30,117,"includes"],[41,185,30,125],[41,186,30,126],[41,199,30,139],[41,200,30,140],[41,201,30,142],[41,203,30,144],[42,8,31,12],[42,15,31,19],[43,10,32,16,"type"],[43,14,32,20],[43,16,32,22],[43,29,32,35],[44,10,33,16,"error"],[44,15,33,21],[44,17,33,23],[44,116,33,122],[45,10,34,16,"workaround"],[45,20,34,26],[45,22,34,28],[46,8,35,12],[46,9,35,13],[47,6,36,8],[48,6,37,8],[49,6,38,8],[49,12,38,14,"_process"],[49,20,38,22],[49,23,38,25,"globalThis"],[49,33,38,35],[49,34,38,36],[49,43,38,45],[49,44,38,46],[50,6,39,8],[50,10,39,12,"_process"],[50,18,39,20],[50,20,39,22],[51,8,40,12],[51,14,40,18,"processVersions"],[51,29,40,33],[51,32,40,36,"_process"],[51,40,40,44],[51,41,40,45],[51,51,40,55],[51,52,40,56],[52,8,41,12],[52,12,41,16,"processVersions"],[52,27,41,31],[52,31,41,35,"processVersions"],[52,46,41,50],[52,47,41,51],[52,53,41,57],[52,54,41,58],[52,56,41,60],[53,10,42,16],[54,10,43,16],[54,16,43,22,"versionString"],[54,29,43,35],[54,32,43,38,"processVersions"],[54,47,43,53],[54,48,43,54],[54,54,43,60],[54,55,43,61],[55,10,44,16],[55,16,44,22,"nodeVersion"],[55,27,44,33],[55,30,44,36,"parseInt"],[55,38,44,44],[55,39,44,45,"versionString"],[55,52,44,58],[55,53,44,59,"replace"],[55,60,44,66],[55,61,44,67],[55,65,44,71],[55,67,44,73],[55,69,44,75],[55,70,44,76],[55,71,44,77,"split"],[55,76,44,82],[55,77,44,83],[55,80,44,86],[55,81,44,87],[55,82,44,88],[55,83,44,89],[55,84,44,90],[55,85,44,91],[56,10,45,16],[57,10,46,16],[57,14,46,20,"nodeVersion"],[57,25,46,31],[57,29,46,35],[57,31,46,37],[57,33,46,39],[58,12,47,20],[59,12,48,20],[59,16,48,24],[59,23,48,31,"globalThis"],[59,33,48,41],[59,34,48,42,"WebSocket"],[59,43,48,51],[59,48,48,56],[59,59,48,67],[59,61,48,69],[60,14,49,24],[60,21,49,31],[61,16,49,33,"type"],[61,20,49,37],[61,22,49,39],[61,30,49,47],[62,16,49,49,"constructor"],[62,27,49,60],[62,29,49,62,"globalThis"],[62,39,49,72],[62,40,49,73,"WebSocket"],[63,14,49,83],[63,15,49,84],[64,12,50,20],[65,12,51,20],[66,12,52,20],[66,19,52,27],[67,14,53,24,"type"],[67,18,53,28],[67,20,53,30],[67,33,53,43],[68,14,54,24,"error"],[68,19,54,29],[68,21,54,31],[68,32,54,42,"nodeVersion"],[68,43,54,53],[68,86,54,96],[69,14,55,24,"workaround"],[69,24,55,34],[69,26,55,36],[70,12,56,20],[70,13,56,21],[71,10,57,16],[72,10,58,16],[73,10,59,16],[73,17,59,23],[74,12,60,20,"type"],[74,16,60,24],[74,18,60,26],[74,31,60,39],[75,12,61,20,"error"],[75,17,61,25],[75,19,61,27],[75,30,61,38,"nodeVersion"],[75,41,61,49],[75,86,61,94],[76,12,62,20,"workaround"],[76,22,62,30],[76,24,62,32],[76,107,62,115],[76,110,63,24],[76,133,63,47],[76,136,64,24],[77,10,65,16],[77,11,65,17],[78,8,66,12],[79,6,67,8],[80,6,68,8],[80,13,68,15],[81,8,69,12,"type"],[81,12,69,16],[81,14,69,18],[81,27,69,31],[82,8,70,12,"error"],[82,13,70,17],[82,15,70,19],[82,70,70,74],[83,8,71,12,"workaround"],[83,18,71,22],[83,20,71,24],[84,6,72,8],[84,7,72,9],[85,4,73,4],[86,4,74,4],[87,0,75,0],[88,0,76,0],[89,0,77,0],[90,0,78,0],[91,0,79,0],[92,0,80,0],[93,0,81,0],[94,0,82,0],[95,4,83,4],[95,11,83,11,"getWebSocketConstructor"],[95,34,83,34,"getWebSocketConstructor"],[95,35,83,34],[95,37,83,37],[96,6,84,8],[96,12,84,14,"env"],[96,15,84,17],[96,18,84,20],[96,22,84,24],[96,23,84,25,"detectEnvironment"],[96,40,84,42],[96,41,84,43],[96,42,84,44],[97,6,85,8],[97,10,85,12,"env"],[97,13,85,15],[97,14,85,16,"constructor"],[97,25,85,27],[97,27,85,29],[98,8,86,12],[98,15,86,19,"env"],[98,18,86,22],[98,19,86,23,"constructor"],[98,30,86,34],[99,6,87,8],[100,6,88,8],[100,10,88,12,"errorMessage"],[100,22,88,24],[100,25,88,27,"env"],[100,28,88,30],[100,29,88,31,"error"],[100,34,88,36],[100,38,88,40],[100,84,88,86],[101,6,89,8],[101,10,89,12,"env"],[101,13,89,15],[101,14,89,16,"workaround"],[101,24,89,26],[101,26,89,28],[102,8,90,12,"errorMessage"],[102,20,90,24],[102,24,90,28],[102,51,90,55,"env"],[102,54,90,58],[102,55,90,59,"workaround"],[102,65,90,69],[102,67,90,71],[103,6,91,8],[104,6,92,8],[104,12,92,14],[104,16,92,18,"Error"],[104,21,92,23],[104,22,92,24,"errorMessage"],[104,34,92,36],[104,35,92,37],[105,4,93,4],[106,4,94,4],[107,0,95,0],[108,0,96,0],[109,0,97,0],[110,0,98,0],[111,0,99,0],[112,0,100,0],[113,0,101,0],[114,4,102,4],[114,11,102,11,"createWebSocket"],[114,26,102,26,"createWebSocket"],[114,27,102,27,"url"],[114,30,102,30],[114,32,102,32,"protocols"],[114,41,102,41],[114,43,102,43],[115,6,103,8],[115,12,103,14,"WS"],[115,14,103,16],[115,17,103,19],[115,21,103,23],[115,22,103,24,"getWebSocketConstructor"],[115,45,103,47],[115,46,103,48],[115,47,103,49],[116,6,104,8],[116,13,104,15],[116,17,104,19,"WS"],[116,19,104,21],[116,20,104,22,"url"],[116,23,104,25],[116,25,104,27,"protocols"],[116,34,104,36],[116,35,104,37],[117,4,105,4],[118,4,106,4],[119,0,107,0],[120,0,108,0],[121,0,109,0],[122,0,110,0],[123,0,111,0],[124,0,112,0],[125,0,113,0],[126,0,114,0],[127,0,115,0],[128,4,116,4],[128,11,116,11,"isWebSocketSupported"],[128,31,116,31,"isWebSocketSupported"],[128,32,116,31],[128,34,116,34],[129,6,117,8],[129,10,117,12],[130,8,118,12],[130,14,118,18,"env"],[130,17,118,21],[130,20,118,24],[130,24,118,28],[130,25,118,29,"detectEnvironment"],[130,42,118,46],[130,43,118,47],[130,44,118,48],[131,8,119,12],[131,15,119,19,"env"],[131,18,119,22],[131,19,119,23,"type"],[131,23,119,27],[131,28,119,32],[131,36,119,40],[131,40,119,44,"env"],[131,43,119,47],[131,44,119,48,"type"],[131,48,119,52],[131,53,119,57],[131,57,119,61],[132,6,120,8],[132,7,120,9],[132,8,121,8],[132,15,121,15,"_a"],[132,17,121,17],[132,19,121,19],[133,8,122,12],[133,15,122,19],[133,20,122,24],[134,6,123,8],[135,4,124,4],[136,2,125,0],[137,2,125,1,"exports"],[137,9,125,1],[137,10,125,1,"WebSocketFactory"],[137,26,125,1],[137,29,125,1,"WebSocketFactory"],[137,45,125,1],[138,2,125,1],[138,6,125,1,"_default"],[138,14,125,1],[138,17,125,1,"exports"],[138,24,125,1],[138,25,125,1,"default"],[138,32,125,1],[138,35,126,15,"WebSocketFactory"],[138,51,126,31],[139,0,126,31],[139,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;OCG;ICI,iBD;IEC;KFgE;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"}},"type":"js/module"}]}